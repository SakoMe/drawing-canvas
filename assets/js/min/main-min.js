function draw(e){xPos=e.clientX-canvas.offsetLeft,yPos=e.clientY-canvas.offsetTop,down===!0&&(context.lineTo(xPos,yPos),context.stroke())}function changeColor(e){context.strokeStyle=e,context.fillStyle=e}function clearCanvas(){context.clearRect(0,0,canvas.width,canvas.height)}function changeBrushSize(e){context.lineWidth=e}function fillCanvas(){context.fillRect(0,0,canvas.width,canvas.height)}function changeBrushStyle(e){context.lineCap=e}function triggerClick(){document.getElementById("file").click()}var canvas=document.getElementById("canvas"),context=canvas.getContext("2d");context.lineWidth=5;var down=!1,xPos,yPos;canvas.addEventListener("mousemove",draw),canvas.addEventListener("mousedown",function(){down=!0,context.beginPath(),context.moveTo(xPos,yPos),canvas.addEventListener("mousemove",draw)}),canvas.addEventListener("mouseup",function(){down=!1}),document.getElementById("file").addEventListener("change",function(e){clearCanvas(),URL=URL||webkitURL;var t=URL.createObjectURL(e.target.files[0]),n=new Image;n.src=t,n.addEventListener("load",function(){imageWidth=n.naturalWidth,imageHeight=n.naturalHeight,newImageWidth=imageWidth,newImageHeight=imageHeight,originalImageRatio=imageWidth/imageHeight,newImageWidth>newImageHeight&&newImageWidth>800&&(newImageWidth=800,newImageHeight=800/originalImageRatio),(newImageWidth>=newImageHeight||newImageWidth>newImageWidth)&&newImageHeight>500&&(newImageHeight=500,newImageWidth=500*originalImageRatio),context.drawImage(n,0,0,newImageWidth,newImageHeight),URL.revokeObjectURL(t)})});